webpackJsonp([1],{"+VGo":function(t,n){},"/9nU":function(t,n){},0:function(t,n,e){t.exports=e("NHnr")},"1yCp":function(t,n){},"7SuA":function(t,n){},HmQy:function(t,n){},NHnr:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});e("Viya");var i=e("/5sW"),o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"app"}},[e("mdc-layout-app",[e("mdc-toolbar",{attrs:{slot:"toolbar",fixed:""},slot:"toolbar"},[e("mdc-toolbar-row",[e("mdc-toolbar-section",{attrs:{"align-start":""}},[e("mdc-toolbar-menu-icon",{attrs:{event:"toggle-drawer"}}),e("mdc-toolbar-title",[t._v("Shadow Dashboard")])],1)],1)],1),e("mdc-drawer",{attrs:{slot:"drawer","toggle-on":"toggle-drawer"},slot:"drawer"},[e("mdc-drawer-list",[e("mdc-drawer-item",{attrs:{"start-icon":"storage",to:"nodes"}},[t._v("Nodes")]),e("mdc-drawer-item",{attrs:{"start-icon":"cloud",to:"subscriptions"}},[t._v("Subscriptions")]),e("mdc-drawer-item",{attrs:{"start-icon":"settings"}},[t._v("Settings")])],1)],1),e("main",{staticClass:"content"},[e("router-view")],1)],1)],1)},s=[],c=e("XyMi");function r(t){e("+VGo")}var a=null,u=!1,d=r,l=null,p=null,f=Object(c["a"])(a,o,s,u,d,l,p),b=f.exports,h=e("/ocq"),m={name:"home"},v=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"home"},[e("mdc-display",{attrs:{tag:"h1"}},[t._v("Welcome to Shadow Dashboard")])],1)},g=[];function S(t){e("1yCp")}var _=!1,w=S,k="data-v-d51daa32",N=null,C=Object(c["a"])(m,v,g,_,w,k,N),O=C.exports,$=e("NYxO"),x={name:"nodes",computed:Object($["b"])(["nodes"]),methods:{onNodeSwitchChanged:function(t){this.$store.dispatch(t.enabled?"enableNode":"disableNode",t)}},created:function(){this.$store.dispatch("refreshNodes")}},D=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"nodes-content"},[e("mdc-list",{attrs:{interactive:""}},t._l(t.nodes,function(n){return e("mdc-list-item",{key:n.id},[t._v("\n      "+t._s(n.remarks&&""!==n.remarks?n.remarks:n.server)+"\n      "),e("div",{attrs:{slot:"end-detail"},slot:"end-detail"},[e("mdc-switch",{attrs:{slot:"end-detail"},on:{change:function(e){t.onNodeSwitchChanged(n)}},slot:"end-detail",model:{value:n.enabled,callback:function(e){t.$set(n,"enabled",e)},expression:"node.enabled"}})],1)])}))],1)},y=[];function E(t){e("bANx")}var A=!1,B=E,j="data-v-69f283ba",R=null,U=Object(c["a"])(x,D,y,A,B,j,R),V=U.exports,M=(e("y9m4"),e("mtWM")),H=e.n(M),P=H.a.create({baseURL:"/"}),T={createOne:function(t){return P("/subscriptions",{method:"post",data:t}).then(function(t){return t.data})},listAll:function(){return P("/subscriptions").then(function(t){return t.data})},getOne:function(t){return P("/subscriptions/".concat(t)).then(function(t){return t.data})},updateOne:function(t){return P("subscriptions/".concat(t.id),{method:"put",data:t})},updateNodes:function(t){return P("/subscriptions/".concat(t,"/update"),{method:"post"})},deleteOne:function(t){return P("/subscriptions/".concat(t),{method:"delete"})}},W={name:"subscriptionDetail",data:function(){return{open:!1,subscription:{},updating:!1}},methods:{show:function(t){this.open=!0,this.subscription={id:t},this.loadSubscription()},loadSubscription:function(){var t=this;this.subscription={id:this.subscription.id,url:""},this.subscription.id&&T.getOne(this.subscription.id).then(function(n){t.subscription=n})},onValidate:function(t){var n=this,e=t.accept;Promise.resolve().then(function(){n.updating=!0}).then(function(){return n.subscription.id?T.updateOne(n.subscription):T.createOne(n.subscription).then(function(t){return n.subscription=t})}).then(function(){n.updating=!1,e(),n.$store.commit("insertOrUpdateSubscription",n.subscription)}).catch(function(t){n.updating=!1})}}},q=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("mdc-dialog",{attrs:{title:"Subscription detail",accept:"Save",cancel:"Discard"},on:{validate:t.onValidate},model:{value:t.open,callback:function(n){t.open=n},expression:"open"}},[e("form",{staticClass:"detail-form"},[e("mdc-textfield",{attrs:{label:"URL",fullwidth:""},model:{value:t.subscription.url,callback:function(n){t.$set(t.subscription,"url",n)},expression:"subscription.url"}})],1)])],1)},F=[];function G(t){e("HmQy")}var I=!1,L=G,Q="data-v-31234216",J=null,X=Object(c["a"])(W,q,F,I,L,Q,J),Y=X.exports,z={name:"subscriptions",components:{SubscriptionDetail:Y},data:function(){return{}},computed:Object($["b"])({subscriptions:"subscriptions"}),created:function(){this.$store.dispatch("refreshSubscriptions")},methods:{onEditButtonClick:function(t){this.$refs.subscriptionDetailDialog.show(t)},onAddFabClick:function(){this.$refs.subscriptionDetailDialog.show(null)},onRefreshButtonClick:function(t){this.$store.dispatch("refreshSubscriptionNodes",t)},onDeleteButtonClick:function(t){this.$store.dispatch("removeSubscription",t)}}},K=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"subscription-content"},[e("mdc-list",{attrs:{interactive:""}},t._l(t.subscriptions,function(n){return e("mdc-list-item",{key:n.id},[t._v("\n      "+t._s(n.url)+"\n      "),e("div",{attrs:{slot:"end-detail"},slot:"end-detail"},[e("div",{staticClass:"list-item-actions-container"},[e("mdc-button",{attrs:{disabled:n.refreshing},on:{click:function(e){t.onRefreshButtonClick(n.id)}}},[t._v("\n            "+t._s(n.refreshing?"Refreshing":"Refresh")+"\n          ")]),e("mdc-button",{attrs:{disabled:n.refreshing},on:{click:function(e){t.onEditButtonClick(n.id)}}},[t._v("Edit")]),e("mdc-button",{attrs:{disabled:n.refreshing},on:{click:function(e){t.onDeleteButtonClick(n.id)}}},[t._v("Delete")])],1)])])})),e("mdc-fab",{attrs:{fixed:"",icon:"add"},on:{click:t.onAddFabClick}}),e("SubscriptionDetail",{ref:"subscriptionDetailDialog"})],1)},Z=[];function tt(t){e("/9nU")}var nt=!1,et=tt,it="data-v-a0ec1a8a",ot=null,st=Object(c["a"])(z,K,Z,nt,et,it,ot),ct=st.exports;i["a"].use(h["a"]);var rt=new h["a"]({routes:[{path:"/",name:"home",component:O},{path:"/nodes",name:"nodes",component:V},{path:"/subscriptions",name:"subscriptions",component:ct}]}),at=e("Biqn"),ut=e.n(at);i["a"].use($["a"]);var dt="http://localhost:4566",lt=new $["a"].Store({state:{nodes:[],subscriptions:[]},mutations:{updateNodes:function(t,n){t.nodes=n},updateSubscriptions:function(t,n){t.subscriptions=n},updateSubscription:function(t,n){var e,i=-1;t.subscriptions.forEach(function(t,o){t.id===n.id&&(i=o,e=ut()({},t,n))}),-1!==i&&t.subscriptions.splice(i,1,e)},insertOrUpdateSubscription:function(t,n){var e,i=-1;t.subscriptions.forEach(function(t,o){t.id===n.id&&(i=o,e=ut()({},t,n))}),-1!==i?t.subscriptions.splice(i,1,e):t.subscriptions.push(n)},deleteSubscription:function(t,n){var e=-1;t.subscriptions.forEach(function(t,i){t.id===n&&(e=i)}),-1!==e&&t.subscriptions.splice(e,1)}},actions:{refreshNodes:function(t){var n=t.commit;H.a.get("".concat(dt,"/nodes")).then(function(t){n("updateNodes",t.data)}).catch(function(t){return console.error(t)})},enableNode:function(t,n){t.commit;H.a.put("".concat(dt,"/nodes/").concat(n.id,"/enabled"),{enabled:!0}).then(function(t){}).catch(function(t){return console.error(t)})},disableNode:function(t,n){t.commit;H.a.put("".concat(dt,"/nodes/").concat(n.id,"/enabled"),{enabled:!1}).then(function(t){}).catch(function(t){return console.error(t)})},refreshSubscriptions:function(t){var n=t.commit;T.listAll().then(function(t){n("updateSubscriptions",t)})},refreshSubscriptionNodes:function(t,n){var e=t.commit;Promise.resolve().then(function(){e("updateSubscription",{id:n,refreshing:!0})}).then(function(){return T.updateNodes(n)}).then(function(){e("updateSubscription",{id:n,refreshing:!1})})},removeSubscription:function(t,n){var e=t.commit;T.deleteOne(n).then(function(){e("deleteSubscription",n)})}}}),pt=e("n6Cl");e("uMhA"),e("uTBe"),e("7SuA"),e("hd1I");i["a"].use(pt["a"]),i["a"].config.productionTip=!1,new i["a"]({router:rt,store:lt,render:function(t){return t(b)}}).$mount("#app")},Viya:function(t,n){},bANx:function(t,n){},hd1I:function(t,n){},uMhA:function(t,n){},uTBe:function(t,n){}},[0]);
//# sourceMappingURL=app.d42ef4f0.js.map